# Модель прецедентів

## Діаграма кейсів

@startuml

left to right direction

actor "Користувач" as User
actor "Адміністратор" as Admin

User --|> Admin

usecase "Реєстрація" as Registration
usecase "Авторизація" as Login
usecase "Пошук та фільтрація даних" as SearchAndFilter

User --> Registration
User --> Login
User --> SearchAndFilter

usecase "Видалення облікового запису" as DeleteAccount
usecase "Додавання нового джерела" as AddSource
usecase "Надання прав" as GrantPermissions

Admin --> DeleteAccount
Admin --> AddSource
Admin --> GrantPermissions

@enduml



## Схема використання для користувача

@startuml

actor "Користувач" as User

usecase "Реєстрація" as Registration
usecase "Авторизація" as Login
usecase "Пошук даних за фільтрами" as SearchWithFilters
usecase "Сортування результатів пошуку" as SortSearchResults
usecase "Фільтрація даних" as DataFiltering
usecase "Пошук даних" as DataSearch

usecase "Створення нового облікового запису" as CreateAccount
usecase "Відновлення паролю" as PasswordRecovery

User --> Registration
Registration --> CreateAccount
Registration --> PasswordRecovery

User --> Login
Login --> PasswordRecovery

User --> SearchWithFilters
SearchWithFilters --> DataFiltering
SearchWithFilters --> DataSearch
DataFiltering --> SortSearchResults
DataSearch --> SortSearchResults

@enduml


## Схема використання для адміністратора

@startuml

actor "Адміністратор" as Admin

usecase "Видалення облікового запису" as DeleteAccount
usecase "Додавання нового джерела" as AddSource
usecase "Надання додаткових прав" as GrantPermissions

usecase "Створення резервної копії" as CreateBackup
usecase "Видалення джерела" as DeleteSource

Admin --> DeleteAccount
DeleteAccount --> CreateBackup

Admin --> AddSource
AddSource --> DeleteSource

Admin --> GrantPermissions

@enduml


## Сценарії викристання для користувача

### Реєстрація

| **_ID:_**                | user_register                                                                                              |
| ------------------------ | -----------------------------------------------------------------------------------------------------------|
| **_НАЗВА:_**             | Реєстрація користувача                                                                                     |
| **_УЧАСНИКИ:_**          | Користувач, система                                                                                        |
| **_ПЕРЕДУМОВИ:_**        | Користувач не має облікового запису в системі                                                              |
| **_РЕЗУЛЬТАТ:_**         | Користувач має акаунт                                                                                      |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | user_exists Обліковий запис з такими даними вже існує                                                      |
|                          | wrong_credentials Неправильно введені дані                                                                 |
| **_ОСНОВНИЙ СЦЕНАРІЙ:_** | 1. Користувач тисне на кнопку "Зареєструватися"                                                            |
|                          | 2. Користувач отримує поля для вводу даних і вводить реєстраційні дані для свого облікового запису         |                         
|                          | 3. Користувач натискає кнопку "Зареєструватися" і відсилає дані системі (можлива wrong_credentials)        |
|                          | 4. Система реєструє користувача (можлива user_exists)                                                      |

@startuml
|Користувач|
    start
    :Користувач натискає на кнопку "Зареєструватися";
|Система|
    :Система отримує запит на реєстрацію;
    :Система надсилає форму для реєстрації;
|Користувач|
    :Користувач отримує форму \nдля реєстрації і заповнює її;
    :Користувач натискає на кнопку "Зареєструватися";
|Система|
    :Система отримує дані з форми;
    :Система перевіряє дані користувача;
    note right #ffaaaa

    wrong_credentials
    user_exists

    end note
    :Система реєструє новий обліковий запис;
|Користувач|
    :Користувач отримує доступ \nдо свого нового облікового запису;
    stop;
@enduml

### Авторизація

| **_ID:_**                | user_login                                                                                                 |
| ------------------------ | -----------------------------------------------------------------------------------------------------------|
| **_НАЗВА:_**             | Авторизація користувача                                                                                    |
| **_УЧАСНИКИ:_**          | Користувач, система                                                                                        |
| **_ПЕРЕДУМОВИ:_**        | Користувач вже має обліковий запис в системі                                                               |
| **_РЕЗУЛЬТАТ:_**         | Користувач авторизований у системі                                                                         |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | wrong_password Введений хибний пароль                                                                      |
|                          | no_user Користувач не зареєстрований у системі                                                             |
| **_ОСНОВНИЙ СЦЕНАРІЙ:_** | 1. Користувач тисне на кнопку "Увійти"                                                                     |
|                          | 2. Користувач отримує поля для вводу даних і вводить пароль та логін для свого облікового запису           |
|                          | 3. Користувач натискає кнопку "Увійти" і відсилає дані системі                                             |
|                          | 4. Система авторизує користувача (можливі wrong_password та no_user)                                       |

@startuml
|Користувач|
    start
    :Користувач натискає на кнопку "Увійти";
|Система|
    :Система отримує запит на авторизацію;
    :Система надсилає форму для авторизації;
|Користувач|
    :Користувач отримує форму \nдля авторизації і заповнює її;
    :Користувач натискає на кнопку "Увійти";
|Система|
    :Система отримує дані з форми;
    :Система перевіряє дані користувача;
    note right #ffaaaa

    wrong_password 
    no_user

    end note
    :Система надає користувачу доступ \nдо його облікового запису;
|Користувач|
    :Користувач отримує доступ \nдо свого облікового запису;
    stop;
@enduml

### Пошук та фільтрація даних

| **_ID:_**                | media_discover                                                                                             |
| ------------------------ | -----------------------------------------------------------------------------------------------------------|
| **_НАЗВА:_**             | Пошук та фільтрація даних                                                                                  |
| **_УЧАСНИКИ:_**          | Користувач, система                                                                                        |
| **_ПЕРЕДУМОВИ:_**        | Користувач виконав авторизацію в системі                                                                   |
| **_РЕЗУЛЬТАТ:_**         | Користувач отримав потрібну інформацію, що була зібрана і проаналізована системою                          |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | no_data За запитом нічого не знайдено                                                                      |                          
| **_ОСНОВНИЙ СЦЕНАРІЙ:_** | 1. Користувач обирає потрібні йому фільтри та тисне на кнопку "Пошук"                                      | 
|                          | 2. Система починає пошук медіа контенту в базі за вказаними фільтрами (можлива no_data)                    | 
|                          | 3. Система повертає рехультат пошуку користувачеві                                                         |

@startuml
|Користувач|
    start
    :Користувач натискає на кнопку "Пошук";
|Система|
    :Система отримує запит на пошук;
    :Система надсилає форму з фільтрами \nдля більш детального пошуку;
|Користувач|
    :Користувач отримує форму \nдля пошуку і заповнює її;
    :Користувач натискає на кнопку "Пошук";
|Система|
    :Система отримує дані з форми;
    :Система здійснює пошук інформації \nза вказаними фільтрами;
    note right #ffaaaa

    no_data

    end note
    :Система формує звіт по знайденій інформації;
    :Система відправляє користувачу сформований звіт;
|Користувач|
    :Користувач отримує звіт по інформації, \nяку хотів знайти;
    stop;
@enduml


## Сценарії викристання для адміністратора

### Надання додаткових прав

| **_ID:_**                | add_rights                                                                                                 |
| ------------------------ | -----------------------------------------------------------------------------------------------------------|
| **_НАЗВА:_**             | Надати додаткові права користувачу                                                                         |
| **_УЧАСНИКИ:_**          | Адміністратор, користувач, система                                                                         |
| **_ПЕРЕДУМОВИ:_**        | Користувач потребує додаткові права в системі                                                              |
| **_РЕЗУЛЬТАТ:_**         | Користувач отримує додаткові права в системі                                                               |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | user_not_found Корисувача не знайдено в системі                                                            |
|                          | already_has_rights Користувач вже має додаткові права в системі                                            |
|                          | rights_deny Адміністратор відмовляє користувачеві в наданні додаткових прав у системі                      |
| **_ОСНОВНИЙ СЦЕНАРІЙ:_** | 1. Користувач надає запит на отримання додаткових прав в системі                                           |
|                          | 2. Адміністратор отримує запит користувача на отримання додаткових прав в системі (можлива rights_deny)    |
|                          | 3. Адміністратор надає додаткові права користувачу в системі (можливі user_not_found та already_has_rights)|
|                          | 4. Користувач отримує додаткові права в системі                                                            |

@startuml
|Користувач|
    start
    :Користувач надає запит адміністратору \nна отримання додаткових прав в системі;
|Адміністратор|
    :Адміністратор отримує запит користувача \nна отримання додаткових прав в системі;
    note right #ffaaaa

    rights_deny

    end note
    :Адміністратор надає користувачу \nдодаткові права в системі;
    note right #ffaaaa

    user_not_found
    already_has_rights

    end note
|Користувач|
    :Користувач отримує додаткові права в системі;
    stop;
@enduml

### Додання нового джерела

| **_ID:_**                | add_source                                                                                                 |
| ------------------------ | -----------------------------------------------------------------------------------------------------------|
| **_НАЗВА:_**             | Додати нове джерело інформації в систему                                                                   |
| **_УЧАСНИКИ:_**          | Адміністратор, система                                                                                     |
| **_ПЕРЕДУМОВИ:_**        | Адміністратор хоче додати нове джерело інформації в систему                                                |
| **_РЕЗУЛЬТАТ:_**         | В систему успішно додано нове джерело інформації                                                           |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | invalid_source Джерело не дійсне                                                                           |
|                          | already_added_source Джерело вже було додано в систему раніше                                              |
| **_ОСНОВНИЙ СЦЕНАРІЙ:_** | 1. Адміністратор створює нове джерело інформації, натиснувши на кнопку "Додати джерело"                    |
|                          | 2. Адміністратор вводить посилання на джерело                                                              |
|                          | 3. Система проводить перевірку на валідність джерела (можливі invalid_source та already_added_source)      |
|                          | 4. Система додає нове джерело до списку доступних джерел інформації                                        |

@startuml
|Адміністратор|
    start
    :Адміністратор натискає на кнопку "Додати джерело";
|Система|
    :Система отримує запит \nна додання нового джерела;
    :Система надсилає форму \nдля додання нового джерела;
|Адміністратор|
    :Адміністратор отримує форму \nдля додання нового джерела;
    :Адміністратор у формі вводить посилання на джерело \nта певну додаткову інформацію про це джерело;
    :Адміністратор натискає на кнопку "Додати джерело";
|Система|
    :Система отримує дані з форми;
    :Система перевіряє джерело на валідність;
    note right #ffaaaa

    invalid_source
    already_added_source

    end note
    :Система додає нове джерело \nдо списку доступних джерел інформації;
|Адміністратор|
    stop;
@enduml

### Видалення облікового запису користувача

| **_ID:_**                | delete_account                                                                                             |
| ------------------------ | -----------------------------------------------------------------------------------------------------------|
| **_НАЗВА:_**             | Видалити обліковий запис користувача                                                                       |
| **_УЧАСНИКИ:_**          | Адміністратор, система                                                                                     |
| **_ПЕРЕДУМОВИ:_**        | Певний обліковий запис користувача має бути видалений з системи                                            |
| **_РЕЗУЛЬТАТ:_**         | Обліковий запис видалено з системи                                                                         |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | delete_deny Адміністратор відхиляє запит на видалення облікового запису                                    |
|                          | already_deleted Обліковий запис був видалений з системи раніше                                             |
| **_ОСНОВНИЙ СЦЕНАРІЙ:_** | 1. Адміністратор отримує запит на видалення облікового запису (можлива delete_deny)                        |
|                          | 2. Адміністратор дає згоду на видалення облікового запису                                                  |
|                          | 3. Система перевіряє наявність облікового запису користувача (можлива already_deleted)                     |
|                          | 4. Система видаляє обліковий запис користувача                                                             |

@startuml
|Адміністратор|
    start
    :Адміністратор отримує запит \nна видалення облікового запису;
    note left #ffaaaa

    delete_deny

    end note
    :Адміністратор дає згоду \nна видалення облікового запису;
    :Адміністратор робить запит \nна видалення облікового запису;
|Система|
    :Система отримує запит \nна видалення облікового запису;
    :Система перевіряє наявність \nоблікового запису користувача;
    note right #ffaaaa

    already_deleted

    end note
    :Система видаляє \nобліковий запис користувача;
|Адміністратор|
    stop;
@enduml